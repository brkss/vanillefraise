import convert from "convert-units";
import { RecipeTotalNutrition } from "../../entity/Nutrition/TotalNutrition";

export const calculateNutrients = (
  nutritients: RecipeTotalNutrition[]
): RecipeTotalNutrition[] => {
  const data = nutritients.map((n) => {
    let val = 0;
    if (n.unit === "kcal") {
      val = n.quantity * 0.129598;
    } else {
      val = convert(n.quantity)
        .from(n.unit === "Âµg" ? "mcg" : (n.unit as any))
        .to("g");
    }
    return {
      ...n,
      quantity: val as number,
    } as RecipeTotalNutrition;
  });
  console.log("rs : ", data);
  return nutritients;
};
